<html>
<head>
<meta http-equiv="Cache-control" content="no-cache"></head>
<title>Digimon World Memory Card Data Viewer</title>
<body>
<div>Please select a local Memory Card file</div>
<input type="file" accept=".mcr" onchange="readFile(this)">
<div id="container"></div>
<script type="text/javascript" src="digimonStats.js"></script>
<script type="text/javascript" src="GUI.js"></script>
<script type="text/javascript" src="MemoryCardModel.js"></script>
<script>
const gui = new GUI();

function readFile(input) {
	let file = input.files[0];
	let reader = new FileReader();
	reader.readAsArrayBuffer(file);
	reader.onload = function() {
		let memcardModel = new MemoryCardModel(reader.result);
		let digis = memcardModel.getRegisteredDigimonData();
		for(let i = 0; i < digis.length; i++){
			document.getElementById("container").appendChild(gui.getRegisteredDigiTable(digis[i], i+1));
		}
	};
	reader.onerror = function() {
		console.log(reader.error);
	};
}
</script>
</body>
</html>
